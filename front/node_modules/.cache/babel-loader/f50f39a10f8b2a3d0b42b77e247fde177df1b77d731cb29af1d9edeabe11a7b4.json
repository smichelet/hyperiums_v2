{"ast":null,"code":"/*\nCSV Parse\n\nPlease look at the [project documentation](https://csv.js.org/parse/) for\nadditional information.\n*/\n\nimport { Transform } from 'stream';\nimport { is_object } from './utils/is_object.js';\nimport { transform } from './api/index.js';\nimport { CsvError } from './api/CsvError.js';\nclass Parser extends Transform {\n  constructor() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super({\n      ...{\n        readableObjectMode: true\n      },\n      ...opts,\n      encoding: null\n    });\n    this.api = transform(opts);\n    this.api.options.on_skip = (err, chunk) => {\n      this.emit('skip', err, chunk);\n    };\n    // Backward compatibility\n    this.state = this.api.state;\n    this.options = this.api.options;\n    this.info = this.api.info;\n  }\n  // Implementation of `Transform._transform`\n  _transform(buf, encoding, callback) {\n    if (this.state.stop === true) {\n      return;\n    }\n    const err = this.api.parse(buf, false, record => {\n      this.push(record);\n    }, () => {\n      this.push(null);\n      this.on('end', this.destroy);\n    });\n    if (err !== undefined) {\n      this.state.stop = true;\n    }\n    callback(err);\n  }\n  // Implementation of `Transform._flush`\n  _flush(callback) {\n    if (this.state.stop === true) {\n      return;\n    }\n    const err = this.api.parse(undefined, true, record => {\n      this.push(record);\n    }, () => {\n      this.push(null);\n      this.on('end', this.destroy);\n    });\n    callback(err);\n  }\n}\nconst parse = function () {\n  let data, options, callback;\n  for (const i in arguments) {\n    const argument = arguments[i];\n    const type = typeof argument;\n    if (data === undefined && (typeof argument === 'string' || Buffer.isBuffer(argument))) {\n      data = argument;\n    } else if (options === undefined && is_object(argument)) {\n      options = argument;\n    } else if (callback === undefined && type === 'function') {\n      callback = argument;\n    } else {\n      throw new CsvError('CSV_INVALID_ARGUMENT', ['Invalid argument:', `got ${JSON.stringify(argument)} at index ${i}`], options || {});\n    }\n  }\n  const parser = new Parser(options);\n  if (callback) {\n    const records = options === undefined || options.objname === undefined ? [] : {};\n    parser.on('readable', function () {\n      let record;\n      while ((record = this.read()) !== null) {\n        if (options === undefined || options.objname === undefined) {\n          records.push(record);\n        } else {\n          records[record[0]] = record[1];\n        }\n      }\n    });\n    parser.on('error', function (err) {\n      callback(err, undefined, parser.api.__infoDataSet());\n    });\n    parser.on('end', function () {\n      callback(undefined, records, parser.api.__infoDataSet());\n    });\n  }\n  if (data !== undefined) {\n    const writer = function () {\n      parser.write(data);\n      parser.end();\n    };\n    // Support Deno, Rollup doesnt provide a shim for setImmediate\n    if (typeof setImmediate === 'function') {\n      setImmediate(writer);\n    } else {\n      setTimeout(writer, 0);\n    }\n  }\n  return parser;\n};\n\n// export default parse\nexport { parse, Parser, CsvError };","map":{"version":3,"names":["Transform","is_object","transform","CsvError","Parser","constructor","opts","arguments","length","undefined","readableObjectMode","encoding","api","options","on_skip","err","chunk","emit","state","info","_transform","buf","callback","stop","parse","record","push","on","destroy","_flush","data","i","argument","type","Buffer","isBuffer","JSON","stringify","parser","records","objname","read","__infoDataSet","writer","write","end","setImmediate","setTimeout"],"sources":["/home/woot/coding/hyperiums2/front/node_modules/csv-parse/lib/index.js"],"sourcesContent":["\n/*\nCSV Parse\n\nPlease look at the [project documentation](https://csv.js.org/parse/) for\nadditional information.\n*/\n\nimport { Transform } from 'stream';\nimport {is_object} from './utils/is_object.js';\nimport {transform} from './api/index.js';\nimport {CsvError} from './api/CsvError.js';\n\nclass Parser extends Transform {\n  constructor(opts = {}){\n    super({...{readableObjectMode: true}, ...opts, encoding: null});\n    this.api = transform(opts);\n    this.api.options.on_skip = (err, chunk) => {\n      this.emit('skip', err, chunk);\n    };\n    // Backward compatibility\n    this.state = this.api.state;\n    this.options = this.api.options;\n    this.info = this.api.info;\n  }\n  // Implementation of `Transform._transform`\n  _transform(buf, encoding, callback){\n    if(this.state.stop === true){\n      return;\n    }\n    const err = this.api.parse(buf, false, (record) => {\n      this.push(record);\n    }, () => {\n      this.push(null);\n      this.on('end', this.destroy);\n    });\n    if(err !== undefined){\n      this.state.stop = true;\n    }\n    callback(err);\n  }\n  // Implementation of `Transform._flush`\n  _flush(callback){\n    if(this.state.stop === true){\n      return;\n    }\n    const err = this.api.parse(undefined, true, (record) => {\n      this.push(record);\n    }, () => {\n      this.push(null);\n      this.on('end', this.destroy);\n    });\n    callback(err);\n  }\n}\n\nconst parse = function(){\n  let data, options, callback;\n  for(const i in arguments){\n    const argument = arguments[i];\n    const type = typeof argument;\n    if(data === undefined && (typeof argument === 'string' || Buffer.isBuffer(argument))){\n      data = argument;\n    }else if(options === undefined && is_object(argument)){\n      options = argument;\n    }else if(callback === undefined && type === 'function'){\n      callback = argument;\n    }else{\n      throw new CsvError('CSV_INVALID_ARGUMENT', [\n        'Invalid argument:',\n        `got ${JSON.stringify(argument)} at index ${i}`\n      ], options || {});\n    }\n  }\n  const parser = new Parser(options);\n  if(callback){\n    const records = options === undefined || options.objname === undefined ? [] : {};\n    parser.on('readable', function(){\n      let record;\n      while((record = this.read()) !== null){\n        if(options === undefined || options.objname === undefined){\n          records.push(record);\n        }else{\n          records[record[0]] = record[1];\n        }\n      }\n    });\n    parser.on('error', function(err){\n      callback(err, undefined, parser.api.__infoDataSet());\n    });\n    parser.on('end', function(){\n      callback(undefined, records, parser.api.__infoDataSet());\n    });\n  }\n  if(data !== undefined){\n    const writer = function(){\n      parser.write(data);\n      parser.end();\n    };\n    // Support Deno, Rollup doesnt provide a shim for setImmediate\n    if(typeof setImmediate === 'function'){\n      setImmediate(writer);\n    }else{\n      setTimeout(writer, 0);\n    }\n  }\n  return parser;\n};\n\n// export default parse\nexport { parse, Parser, CsvError };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}